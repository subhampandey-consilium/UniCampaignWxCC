"use strict";(self.webpackChunkuni_connect=self.webpackChunkuni_connect||[]).push([[2195],{52195:(va,X,m)=>{m.r(X),m.d(X,{EmailModule:()=>Aa});var T=m(93917),v=m(4859),S=m(3238),x=m(59549),ce=m(73546),L=m(97392),U=m(44144),R=m(84385),K=m(56709),pe=m(8882),ee=m(82689),de=m(77331),D=m(37084),Z=m(27974),h=m(96308),ue=m(17009),c=m(2143),N=m(3848),k=m(28255),s=m(24006),P=m(79497),ge=m(53377);class q{constructor(n){this.id=(n=n||{}).id||0,this.name=n.name||"",this.gateway=n.gateway||"",this.description=n.description||"",this.waitTimeInterval=n.waitTimeInterval||0,this.waitTimeIntervalUnit=n.waitTimeIntervalUnit||"",this.timeZone=n.timeZone||new ge.S,this.startDate=new Date(n.startDate),this.stopDate=new Date(n.stopDate),this.startTime=n.startTime||"00:00",this.stopTime=n.stopTime||"23:59",this.status=n.status||!1,this.maxAttempts=n.maxAttempts||1,this.maxBatchSize=n.maxBatchSize||10,this.dialingPreference=n.dialingPreference||[]}}var F=m(1059),y=m(24850),e=m(94650),g=m(80529),te=m(16916);let E=(()=>{class a{constructor(t){this._http=t,this.API_BASE_URL=te.N.apiUrl}getAll(t,i,o="",l=""){return this._http.get(this.API_BASE_URL+"api/emailcampaign/getall",{params:(new g.LE).set("index",t.toString()).set("size",i.toString()).set("searchItem",o).set("sortBy",l)})}addCampaign(t){return this._http.post(this.API_BASE_URL+"api/emailcampaign/add",t)}changeCampaignState(t,i){return this._http.patch(this.API_BASE_URL+`api/emailcampaign/change-state/${t}/${i}`,null)}deleteCampaign(t){return this._http.delete(this.API_BASE_URL+`api/emailcampaign/${t}`)}getLeadStatus(t,i,o){return this._http.get(this.API_BASE_URL+"api/emailcampaignlead/lead-status",{params:(new g.LE).set("emailcampaignId",t.toString())})}saveCampaign(t){return this._http.put(this.API_BASE_URL+`api/emailcampaign/${t.id}`,t)}getById(t){return this._http.get(this.API_BASE_URL+`api/emailcampaign/get/${t}`)}assignCampaignList(t){return this._http.post(this.API_BASE_URL+"api/emailcampaignlead/assign-lead",t)}appendLead(t,i){return this._http.get(this.API_BASE_URL+`api/campaignlead/${t}/append`,{params:(new g.LE).set("childListId",i.toString())})}changePriority(t,i,o){let l=this.API_BASE_URL+"api/emailcampaignlead/change-priority",r=new g.LE;return r=r.set("mapId",t.toString()).set("campaignId",i.toString()).set("newPriority",o.toString()),this._http.get(l,{params:r})}switchCampaignLeadState(t){return this._http.post(this.API_BASE_URL+"api/emailcampaignlead/switch-state",t)}getLeadsByCampaignId(t){return this._http.get(this.API_BASE_URL+`api/campaignlead/${t}`)}assignCampaignHoliday(t){return this._http.post(this.API_BASE_URL+"api/campaign/assign/holiday",t)}getHolidayStats(t,i,o){return this._http.get(this.API_BASE_URL+"api/campaign/get/assignedholiday/"+t,{params:(new g.LE).set("campaignId",t.toString())})}deleteHoliday(t){return this._http.delete(this.API_BASE_URL+`api/campaign/delete/assignedholiday/${t}`)}deleteLead(t){return this._http.delete(this.API_BASE_URL+`api/emailcampaignlead/${t}`)}removeActiveRecords(t){return this._http.get(this.API_BASE_URL+`api/campaign/${t}/clear`)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(g.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ae=m(66010),_e=m(60500),w=m(6072),Y=m(96560),d=m(1576),_=m(36895),O=m(43764),J=m(99602),B=m(47957);const he=["pickerStartDateTime"],fe=["pickerStopDateTime"];function Ce(a,n){if(1&a&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.email.name," ")}}function xe(a,n){1&a&&(e.TgZ(0,"div",43),e._uU(1,"New Email Campaign"),e.qZA())}function Te(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().addEmailCampaign()}),e.TgZ(1,"span"),e._uU(2,"Add"),e.qZA()()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.EmailForm.invalid)}}function Ze(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveEmailCampaign()}),e.TgZ(1,"span"),e._uU(2,"Save"),e.qZA()()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.EmailForm.invalid||t.EmailForm.pristine)}}function be(a,n){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ae(a,n){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.displayName," ")}}const ve=function(){return{delay:"100ms",x:"-25px"}},Le=function(a){return{value:"*",params:a}};let ie=(()=>{class a{constructor(t,i,o,l,r,u,f,A){this._emailcampaignService=t,this._emailconfiguration=i,this._geoInfoService=o,this._formBuilder=l,this._toastService=r,this.route=u,this._router=f,this._snackbarService=A,this.timeZoneInfos=[],this.gateways=[],this.todayDate=new Date,this.email=new q,this._emailconfiguration.getAll(1,200).subscribe(I=>{this.gateways=I.result.items})}ngOnInit(){this.routeParams=this.route.params,this.EmailForm=this.createUserForm(),this._geoInfoService.getAllTimeZones().subscribe(t=>{this.timeZoneInfos=t.result;const i=this.timeZoneInfos.find(o=>o.isCurrentServerTimeZone);this.EmailForm.get("timeZone").setValue(i),this.filteredTimeZoneInfos=this.EmailForm.get("timeZone").valueChanges.pipe((0,F.O)(""),(0,y.U)(o=>"string"==typeof o?o:o.displayName),(0,y.U)(o=>o?this._filter(o):this.timeZoneInfos.slice()))}),"new"===this.routeParams.value.id?(this.pageType="new",this.email=new q):(this.pageType="edit",this.email.id=this.routeParams.value.id,this._emailcampaignService.getById(this.routeParams.value.id).subscribe(t=>{this.email=new q(t),this.EmailForm=this.createUserForm(),this.todayDate=this.email.startDate}))}_filter(t){const i=t.toLowerCase();return this.timeZoneInfos.filter(o=>o.displayName.toLowerCase().includes(i))}displayTimeZoneNameFn(t){return t&&t.displayName?t.displayName:""}createUserForm(){return this._formBuilder.group({id:[this.email.id],name:new s.NI(this.email.name,[s.kI.required]),maxBatchSize:new s.NI(this.email.maxBatchSize,[s.kI.required]),waitTimeInterval:new s.NI(this.email.waitTimeInterval,[s.kI.required]),waitTimeIntervalUnit:new s.NI(this.email.waitTimeIntervalUnit,[s.kI.required]),description:[this.email.description],gateway:[this.email.gateway,[s.kI.required]],status:this.email.status,maxAttempts:new s.NI(this.email.maxAttempts,[s.kI.required]),startDate:new s.NI(this.email.startDate,[s.kI.required]),stopDate:new s.NI(this.email.stopDate,[s.kI.required]),startTime:new s.NI(this.email.startTime,[s.kI.required]),stopTime:new s.NI(this.email.stopTime,[s.kI.required]),timeZone:new s.NI(this.email.timeZone,[s.kI.required])})}addEmailCampaign(){const t=this.EmailForm.getRawValue();t.id="00000000-0000-0000-0000-000000000000",console.log(t),this._emailcampaignService.addCampaign(t).subscribe(i=>{i.result&&(this.email.id=i.result,this._snackbarService.success(`EmailCampaign ${t.name} added successfully.`),this._router.navigateByUrl("app/emailcampaign-management/emails"))})}saveEmailCampaign(){const t=this.EmailForm.getRawValue();t.id=this.email.id,console.log(t),this._emailcampaignService.saveCampaign(t).subscribe(()=>{this._toastService.success(`EmailCampaign ${t.name} saved successfully.`),this._router.navigateByUrl("app/emailcampaign-management/emails")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(E),e.Y36(ae.E),e.Y36(_e.q),e.Y36(s.qu),e.Y36(w.k),e.Y36(T.gz),e.Y36(T.F0),e.Y36(w.k))},a.\u0275cmp=e.Xpm({type:a,selectors:[["uc-email"]],viewQuery:function(t,i){if(1&t&&(e.Gf(he,7),e.Gf(fe,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.pickerStartDateTime=o.first),e.iGM(o=e.CRH())&&(i.pickerStopDateTime=o.first)}},decls:95,vars:22,consts:[["id","email",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","",1,"mr-0","mr-sm-16",3,"routerLink"],["fxLayout","column","fxLayoutAlign","start start"],["class","h2",4,"ngIf"],[1,"subtitle","secondary-text"],["mat-raised-button","","class","save-product-button",3,"disabled","click",4,"ngIf"],[1,"content-card"],[1,"content"],["name","EmailForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["label","Basic Info"],["cucPerfectScrollbar","",1,"tab-content","p-24"],["fxLayout","row","fxLayoutAlign","space-between"],["appearance","outline","floatLabel","always","fxFlex","48"],["matInput","","placeholder","Name","formControlName","name","required",""],["matInput","","placeholder","Max Batch Size","formControlName","maxBatchSize","required",""],["matInput","","placeholder","Description","formControlName","description"],["name","waitTimeIntervalUnit","formControlName","waitTimeIntervalUnit","required",""],["value","Minutes"],["value","Hours"],["value","Days"],["name","gateway","formControlName","gateway","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","min","1","max","100","placeholder","Wait Time Interval","formControlName","waitTimeInterval"],["labelPosition","before","formControlName","status",1,"w-30-p"],["matInput","","type","number","placeholder","Max Attempts","formControlName","maxAttempts","required",""],["appearance","outline","floatLabel","always","fxFlex","24"],["matInput","","type","text","placeholder","00:00","name","startTime","formControlName","startTime","required",""],["matInput","","type","text","placeholder","23:59","name","stopTime","formControlName","stopTime","required",""],["appearance","outline","fxFlex","24","floatLabel","always"],["matInput","","formControlName","startDate",3,"matDatepicker","min"],["matSuffix","",3,"for"],["color","accent"],["startDatePicker",""],["matInput","","formControlName","stopDate",3,"matDatepicker","min"],["stopDatePicker",""],["appearance","outline","floatlabel","always","fxFlex","48"],["type","text","placeholder","Select timezone","matInput","","formControlName","timeZone","required","",3,"matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[1,"h2"],["mat-raised-button","",1,"save-product-button",3,"disabled","click"],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5)(6,"mat-icon"),e._uU(7,"arrow_back"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,Ce,2,1,"div",7),e.YNc(10,xe,2,0,"div",7),e.TgZ(11,"div",8)(12,"span"),e._uU(13,"Campaign Settings"),e.qZA()()()(),e.YNc(14,Te,3,1,"button",9),e.YNc(15,Ze,3,1,"button",9),e.qZA(),e.TgZ(16,"div",10)(17,"div",11)(18,"form",12)(19,"mat-tab-group")(20,"mat-tab",13)(21,"div",14)(22,"div",15)(23,"mat-form-field",16)(24,"mat-label"),e._uU(25,"Name"),e.qZA(),e._UZ(26,"input",17),e.qZA(),e.TgZ(27,"mat-form-field",16)(28,"mat-label"),e._uU(29,"Max Batch Size"),e.qZA(),e._UZ(30,"input",18),e.qZA()(),e.TgZ(31,"div",15)(32,"mat-form-field",16)(33,"mat-label"),e._uU(34,"Description"),e.qZA(),e._UZ(35,"input",19),e.qZA(),e.TgZ(36,"mat-form-field",16)(37,"mat-label"),e._uU(38,"Wait Time Interval Unit"),e.qZA(),e.TgZ(39,"mat-select",20)(40,"mat-option",21),e._uU(41,"Minutes"),e.qZA(),e.TgZ(42,"mat-option",22),e._uU(43,"Hours"),e.qZA(),e.TgZ(44,"mat-option",23),e._uU(45,"Days"),e.qZA()()()(),e.TgZ(46,"div",15)(47,"mat-form-field",16)(48,"mat-label"),e._uU(49,"Gateway"),e.qZA(),e.TgZ(50,"mat-select",24),e.YNc(51,be,2,2,"mat-option",25),e.qZA()(),e.TgZ(52,"mat-form-field",16)(53,"mat-label"),e._uU(54,"Wait Time Interval"),e.qZA(),e._UZ(55,"input",26),e.qZA()(),e.TgZ(56,"div",15)(57,"mat-checkbox",27),e._uU(58," Activate Campaign "),e.qZA(),e.TgZ(59,"mat-form-field",16)(60,"mat-label"),e._uU(61,"Max Attempts"),e.qZA(),e._UZ(62,"input",28),e.qZA()(),e.TgZ(63,"div",15)(64,"mat-form-field",29)(65,"mat-label"),e._uU(66,"Active Hours"),e.qZA(),e._UZ(67,"input",30),e.qZA(),e.TgZ(68,"mat-form-field",29)(69,"mat-label"),e._uU(70,"Active Hours"),e.qZA(),e._UZ(71,"input",31),e.qZA(),e.TgZ(72,"mat-form-field",32)(73,"mat-label"),e._uU(74,"Start Date"),e.qZA(),e._UZ(75,"input",33)(76,"mat-datepicker-toggle",34)(77,"mat-datepicker",35,36),e.qZA(),e.TgZ(79,"mat-form-field",32)(80,"mat-label"),e._uU(81,"End date"),e.qZA(),e._UZ(82,"input",37)(83,"mat-datepicker-toggle",34)(84,"mat-datepicker",35,38),e.qZA()(),e.TgZ(86,"div",15)(87,"mat-form-field",39)(88,"mat-label"),e._uU(89,"Time Zone"),e.qZA(),e._UZ(90,"input",40),e.TgZ(91,"mat-autocomplete",41,42),e.YNc(93,Ae,2,2,"mat-option",25),e.ALo(94,"async"),e.qZA()()()()()()()()()()()),2&t){const o=e.MAs(78),l=e.MAs(85),r=e.MAs(92);e.xp6(5),e.Q6J("routerLink","/app/emailcampaign-management/emails"),e.xp6(3),e.Q6J("@animate",e.VKq(20,Le,e.DdM(19,ve))),e.xp6(1),e.Q6J("ngIf","edit"===i.pageType),e.xp6(1),e.Q6J("ngIf","new"===i.pageType),e.xp6(4),e.Q6J("ngIf","new"===i.pageType),e.xp6(1),e.Q6J("ngIf","edit"===i.pageType),e.xp6(3),e.Q6J("formGroup",i.EmailForm),e.xp6(33),e.Q6J("ngForOf",i.gateways),e.xp6(24),e.Q6J("matDatepicker",o)("min",i.todayDate),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Q6J("matDatepicker",l)("min",i.EmailForm.get("startDate").value),e.xp6(1),e.Q6J("for",l),e.xp6(7),e.Q6J("matAutocomplete",r),e.xp6(1),e.Q6J("displayWith",i.displayTimeZoneNameFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(94,17,i.filteredTimeZoneInfos))}},directives:[Y.V,d.xw,d.Wh,v.lW,T.rH,L.Hw,_.O5,s._Y,s.JL,d.yH,s.sg,N.SP,N.uX,O.i,x.KE,x.hX,U.Nt,s.Fj,s.JJ,s.u,s.Q7,R.gD,S.ey,_.sg,s.qQ,s.Fd,s.wV,K.oG,J.hl,J.nW,x.R9,J.Mq,B.ZL,B.XC],pipes:[_.Ov],styles:[""],encapsulation:2,data:{animation:P.J}}),a})();var ye=m(23753),$=m(36787),G=m(21086),we=m(80013),Se=m(75778),j=m(87545),z=m(27221),De=m(77394),b=m(68117);class Ne{constructor(n){this.leadListId=(n=n||{}).campaignLeadlistId||"",this.firstName=n.firstName||"",this.emailTemplate=n.emailTemplate||"",this.subject=n.subject||"",this.templateMessage=n.templateMessage||"",this.uniqueIdentifier=n.uniqueIdentifier||"",this.phoneNumber=n.phoneNumber||"",this.email=n.email||"",this.lastName=n.lastName||"",this.recurrence=n.recurrence||M.Single,this.sortColumns=n.sortColumns||[]}}var M=(()=>{return(a=M||(M={}))[a.Single=1]="Single",M;var a})(),Ee=m(12054),Ie=m(59756),C=m(65938),W=m(83683),H=m(86257),V=m(71948);const Ue=["stepper"];function Re(a,n){1&a&&e._uU(0,"Choose action type")}function ke(a,n){1&a&&e._uU(0,"Choose list")}function qe(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Fe(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.key," ")}}function Je(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.key," ")}}function Me(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.key," ")}}function He(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.key," ")}}function Qe(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.key," ")}}function Pe(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-step",4)(1,"form",12),e.YNc(2,ke,1,0,"ng-template",6),e.TgZ(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),e._uU(6,"Select Lead List"),e.qZA(),e.TgZ(7,"mat-select",18),e.NdJ("selectionChange",function(o){return e.CHM(t),e.oxw().getHeaders(o)}),e.YNc(8,qe,2,2,"mat-option",19),e.qZA()(),e.TgZ(9,"mat-form-field",17)(10,"mat-label"),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"mat-select",20),e.YNc(13,Fe,2,2,"mat-option",19),e.qZA()()(),e.TgZ(14,"div",16)(15,"mat-form-field",17)(16,"mat-label"),e._uU(17,"Subject"),e.qZA(),e._UZ(18,"input",21),e.qZA(),e.TgZ(19,"mat-form-field",17)(20,"mat-label"),e._uU(21,"Phone Number"),e.qZA(),e.TgZ(22,"mat-select",22),e.YNc(23,Je,2,2,"mat-option",19),e.qZA()()(),e.TgZ(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"First Name"),e.qZA(),e.TgZ(28,"mat-select",23),e.YNc(29,Me,2,2,"mat-option",19),e.qZA()(),e.TgZ(30,"mat-form-field",17)(31,"mat-label"),e._uU(32,"Last Name"),e.qZA(),e.TgZ(33,"mat-select",24),e.YNc(34,He,2,2,"mat-option",19),e.qZA()()(),e.TgZ(35,"div",16)(36,"mat-form-field",17)(37,"mat-label"),e._uU(38,"Unique Identifier"),e.qZA(),e.TgZ(39,"mat-select",25),e.YNc(40,Qe,2,2,"mat-option",19),e.qZA()(),e.TgZ(41,"mat-form-field",17)(42,"mat-label"),e._uU(43,"Recurrence"),e.qZA(),e.TgZ(44,"mat-select",26)(45,"mat-option",27),e._uU(46,"Single"),e.qZA()()()()()()}if(2&a){const t=e.oxw();e.Q6J("stepControl",t.assignLeadListForm),e.xp6(1),e.Q6J("formGroup",t.assignLeadListForm),e.xp6(7),e.Q6J("ngForOf",t.ContactLists),e.xp6(5),e.Q6J("ngForOf",t.listHeaders),e.xp6(10),e.Q6J("ngForOf",t.listHeaders),e.xp6(6),e.Q6J("ngForOf",t.listHeaders),e.xp6(5),e.Q6J("ngForOf",t.listHeaders),e.xp6(6),e.Q6J("ngForOf",t.listHeaders),e.xp6(5),e.Q6J("value",0)}}function Ye(a,n){1&a&&e._uU(0,"Choose Email Template")}function Oe(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Be(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-step",4)(1,"form",12),e.YNc(2,Ye,1,0,"ng-template",6),e.TgZ(3,"mat-form-field",28)(4,"mat-label"),e._uU(5,"Email Template"),e.qZA(),e.TgZ(6,"mat-select",29,30),e.NdJ("ngModelChange",function(){e.CHM(t);const o=e.MAs(7);return e.oxw().selectedmessage(o.value)}),e.YNc(8,Oe,2,2,"mat-option",19),e.qZA()(),e.TgZ(9,"div")(10,"mat-form-field",28)(11,"mat-label"),e._uU(12,"Message"),e.qZA(),e._UZ(13,"input",31),e._uU(14),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("stepControl",t.assignLeadListForm),e.xp6(1),e.Q6J("formGroup",t.assignLeadListForm),e.xp6(7),e.Q6J("ngForOf",t.emailTemplates),e.xp6(6),e.hij(" ",t.message," ")}}function $e(a,n){1&a&&e._uU(0,"Sorting")}function Ge(a,n){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.key," ")}}function je(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().addPhoneColumnFormGroup(o)}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}if(2&a){const t=e.oxw().index;e.s9C("id",t)}}function ze(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().removePhoneColumn(o)}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}if(2&a){const t=e.oxw().index;e.s9C("id",t)}}function We(a,n){if(1&a&&(e.TgZ(0,"div",32)(1,"div",33)(2,"mat-form-field",34)(3,"mat-label"),e._uU(4,"Header"),e.qZA(),e.TgZ(5,"mat-select",35),e.YNc(6,Ge,2,2,"mat-option",19),e.qZA()(),e.TgZ(7,"mat-form-field",34)(8,"mat-label"),e._uU(9,"Sort Order"),e.qZA(),e.TgZ(10,"mat-select",36)(11,"mat-option",37),e._uU(12,"Ascending"),e.qZA(),e.TgZ(13,"mat-option",38),e._uU(14,"Descending"),e.qZA()()(),e.TgZ(15,"div",39),e.YNc(16,je,3,1,"button",40),e.YNc(17,ze,3,1,"button",40),e.qZA()()()),2&a){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(5),e.Q6J("ngForOf",i.listHeaders),e.xp6(10),e.Q6J("ngIf",i.sortColumnsFormArray.length-1==t),e.xp6(1),e.Q6J("ngIf",i.sortColumnsFormArray.length-1!=t)}}function Ve(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().myStepper.next()}),e._uU(2,"Next"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw().dialogRef.close(!0)}),e._uU(4,"Close"),e.qZA()()}}function Xe(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).appendLeadList()}),e._uU(1,"Append"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",!t.appendLeadListForm.valid)}}function Ke(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).myStepper.next()}),e._uU(1,"Next"),e.qZA()}}function et(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().myStepper.previous()}),e._uU(2,"Back"),e.qZA(),e.YNc(3,Xe,2,1,"button",45),e.YNc(4,Ke,2,0,"button",46),e.TgZ(5,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw().dialogRef.close(!0)}),e._uU(6,"Close"),e.qZA()()}if(2&a){const t=e.oxw(),i=e.MAs(4);e.xp6(3),e.Q6J("ngIf","APPEND"==t.actionSelectionForm.get("actionType").value&&1==i.selectedIndex),e.xp6(1),e.Q6J("ngIf","NEW"==t.actionSelectionForm.get("actionType").value)}}function tt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).assignLeadListToCampaign()}),e._uU(1,"Save"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",!t.assignLeadListForm.valid)}}function at(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().myStepper.previous()}),e._uU(2,"Back"),e.qZA(),e.YNc(3,tt,2,1,"button",45),e.TgZ(4,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw().dialogRef.close(!0)}),e._uU(5,"Close"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngIf","NEW"==t.actionSelectionForm.get("actionType").value)}}let it=(()=>{class a{constructor(t,i,o,l,r,u){this._formBuilder=t,this._leadlistService=i,this._emailcampaignService=o,this._emailtemplateService=l,this._snackbarService=r,this.dialogRef=u,this.campaignLeadList={},this.listHeaders=[],this.ContactLists=[],this.parentContactLists=[],this.leadActionType="NEW",this.recurrenceType=b.e_,this.timeUnit=b.j1,this.emailTemplates=[],this.isEditable=!1,this.leadList=new Ne,this._emailtemplateService.getAll(1,200).subscribe(f=>{this.emailTemplates=f.result.items})}onNoClick(){this.dialogRef.close()}selectedmessage(t){this.message=this.emailTemplates.find(i=>i.id===t).message,this.leadList.templateMessage=this.message,console.log(this.message)}ngOnInit(){this.actionSelectionForm=this._formBuilder.group({actionType:["",s.kI.required]}),this.assignLeadListForm=this.createCreateForm(),this._leadlistService.getAll(1,100,b.B3.Email).subscribe(t=>{this.ContactLists=t.result.items})}displayTimeZoneNameFn(t){return t&&t.displayName?t.displayName:void 0}displayCountryNameFn(t){return t&&t.name?t.name:void 0}getHeaders(t){this._leadlistService.getLeadHeader(t.value).subscribe(i=>{this.listHeaders=i.result,console.log(this.listHeaders)})}createCreateForm(){return this._formBuilder.group({leadlistId:new s.NI(this.leadList.leadListId,[s.kI.required]),phoneNumber:new s.NI(this.leadList.phoneNumber,[s.kI.required]),email:new s.NI(this.leadList.email,[s.kI.required]),firstName:[this.leadList.firstName.valueOf()],lastName:[this.leadList.lastName.valueOf()],emailTemplate:this.leadList.emailTemplate,subject:this.leadList.subject,templateMessage:this.leadList.templateMessage,uniqueIdentifier:[this.leadList.uniqueIdentifier.valueOf()],recurrence:[this.leadList.recurrence],sortColumns:this.addSortColumns(this.leadList.sortColumns)})}addSortColumns(t){var i=this._formBuilder.array([]);if(0==t.length){const o=this._formBuilder.group({headerIndex:new s.NI,sortOrder:new s.NI});i.push(o)}else t.forEach(o=>{const l=this._formBuilder.group({headerIndex:new s.NI(o.sortBy),sortOrder:new s.NI(o.sortOrder)});i.push(l)});return i}addPhoneColumnFormGroup(){const t=this._formBuilder.group({headerIndex:[s.kI.required],sortOrder:[s.kI.required]});this.sortColumnsFormArray.push(t)}removePhoneColumn(t){this.sortColumnsFormArray.removeAt(this.sortColumnsFormArray.length-1)}get sortColumnsFormArray(){return this.assignLeadListForm.get("sortColumns")}getPhoneColumnsControls(){return this.assignLeadListForm.get("sortColumns").controls}rbNewListSelected(){this.assignLeadListForm.addControl("phoneNumber",new s.NI(this.leadList.phoneNumber,[s.kI.required])),this.assignLeadListForm.addControl("firstName",new s.NI(this.leadList.firstName)),this.assignLeadListForm.addControl("lastName",new s.NI(this.leadList.lastName)),this.assignLeadListForm.addControl("emailTemplate",new s.NI(this.leadList.emailTemplate)),this.assignLeadListForm.addControl("email",new s.NI(this.leadList.email)),this.assignLeadListForm.addControl("subject",new s.NI(this.leadList.subject)),this.assignLeadListForm.addControl("uniqueIdentifier",new s.NI(this.leadList.uniqueIdentifier)),this.assignLeadListForm.addControl("recurrence",new s.NI(this.leadList.recurrence)),this.assignLeadListForm.addControl("templateMessage",new s.NI(this.leadList.templateMessage)),this.assignLeadListForm.removeControl("childListId")}assignLeadListToCampaign(){var t=this.assignLeadListForm.getRawValue();t.EmailCampaignId=this.email.id,t.templateMessage=this.message,this._emailcampaignService.assignCampaignList(t).subscribe(i=>{this._snackbarService.success("List assigned successfully."),this.dialogRef.close()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.qu),e.Y36(Ee.Z),e.Y36(E),e.Y36(Ie.g),e.Y36(w.k),e.Y36(C.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["dialog-assign-lead"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ue,5),2&t){let o;e.iGM(o=e.CRH())&&(i.myStepper=o.first)}},decls:24,vars:13,consts:[[1,"top-bg","accent"],[1,"assign-lead-content"],[3,"disableRipple"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"choose-option"],[1,""],["formControlName","actionType",3,"ngModel","ngModelChange"],["value","NEW",3,"change"],[3,"stepControl",4,"ngIf"],[1,"form-lead-assign",3,"formGroup"],["formArrayName","sortColumns",4,"ngFor","ngForOf"],["align","end"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between"],["appearance","outline","floatLabel","always","fxFlex","48"],["name","leadlistId","formControlName","leadlistId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["name","email","formControlName","email"],["matInput","","name","subject","formControlName","subject","required",""],["formControlName","phoneNumber"],["name","firstName","formControlName","firstName"],["formControlName","lastName"],["formControlName","uniqueIdentifier"],["formControlName","recurrence"],[3,"value"],["appearance","outline","floatLabel","always",1,"w-100-p"],["formControlName","emailTemplate",3,"ngModelChange"],["templatemessage",""],["matInput","","type","textarea","name","message","formControlName","templateMessage"],["formArrayName","sortColumns"],["fxLayout","row","fxLayoutAlign","space-between",3,"formGroupName"],["appearance","outline","floatlabel","always","fxFlex","40",1,"w-100-p"],["placeholder","Selection Required","formControlName","headerIndex"],["placeholder","Selection Required","formControlName","sortOrder"],["value","1"],["value","2"],["fxFlex","15",1,"mini-fab-button-container"],["mat-mini-fab","","color","secondary","mat-icon-button","",3,"id","click",4,"ngIf"],["mat-mini-fab","","color","secondary","mat-icon-button","",3,"id","click"],["mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"click"],["color","secondary","mat-raised-button","",3,"click"],["mat-raised-button","","color","accent","type","submit",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-toolbar",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"mat-horizontal-stepper",2,3)(5,"mat-step",4)(6,"form",5),e.YNc(7,Re,1,0,"ng-template",6),e.TgZ(8,"div",7)(9,"mat-label",8),e._uU(10,"Action Type :"),e.qZA(),e.TgZ(11,"mat-radio-group",9),e.NdJ("ngModelChange",function(l){return i.leadActionType=l}),e.TgZ(12,"mat-radio-button",10),e.NdJ("change",function(){return i.rbNewListSelected()}),e._uU(13,"New"),e.qZA()()()()(),e.YNc(14,Pe,47,9,"mat-step",11),e.YNc(15,Be,15,4,"mat-step",11),e.TgZ(16,"mat-step",4),e.YNc(17,$e,1,0,"ng-template",6),e.TgZ(18,"form",12),e.YNc(19,We,18,4,"div",13),e.qZA()()()(),e.TgZ(20,"mat-dialog-actions",14),e.YNc(21,Ve,5,0,"div",15),e.YNc(22,et,7,2,"div",15),e.YNc(23,at,6,1,"div",15),e.qZA()),2&t){const o=e.MAs(4);e.xp6(1),e.hij("Assign List : ",i.email.name,""),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(2),e.Q6J("stepControl",i.actionSelectionForm),e.xp6(1),e.Q6J("formGroup",i.actionSelectionForm),e.xp6(5),e.Q6J("ngModel",i.leadActionType),e.xp6(3),e.Q6J("ngIf","NEW"==i.actionSelectionForm.get("actionType").value),e.xp6(1),e.Q6J("ngIf","NEW"==i.actionSelectionForm.get("actionType").value),e.xp6(1),e.Q6J("stepControl",i.assignLeadListForm),e.xp6(2),e.Q6J("formGroup",i.assignLeadListForm),e.xp6(1),e.Q6J("ngForOf",i.getPhoneColumnsControls()),e.xp6(2),e.Q6J("ngIf",0==o.selectedIndex),e.xp6(1),e.Q6J("ngIf",1==o.selectedIndex||2==o.selectedIndex),e.xp6(1),e.Q6J("ngIf",3==o.selectedIndex)}},directives:[W.Ye,C.xY,H.Vq,H.C0,s._Y,s.JL,s.sg,H.VY,x.hX,V.VQ,s.JJ,s.u,V.U0,_.O5,d.xw,d.Wh,x.KE,d.yH,R.gD,_.sg,S.ey,U.Nt,s.Fj,s.Q7,s.CE,s.x0,v.lW,L.Hw,C.H8],styles:[".form-lead-assign[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{padding-top:25px}mat-radio-button[_ngcontent-%COMP%]{margin-left:15%}"]}),a})();var nt=m(88428),ot=m(4556);function lt(a,n){1&a&&(e.TgZ(0,"mat-header-cell",22),e._uU(1," List Name "),e.qZA())}function st(a,n){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.leadName," ")}}function mt(a,n){1&a&&(e.TgZ(0,"mat-header-cell",22),e._uU(1," Total Records "),e.qZA())}function rt(a,n){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.totalRecords," ")}}function ct(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Priority "),e.qZA())}function pt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().changeLeadPriority(o)}),e.TgZ(1,"span",27),e._uU(2,"done"),e.qZA()()}}function dt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw();return l.restoreChangePriorityControl(o),o.priority=l.previousPriority}),e.TgZ(1,"span",27),e._uU(2,"close"),e.qZA()()}}function ut(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"div",23)(2,"input",24),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.priority=o}),e.qZA(),e.TgZ(3,"div",25)(4,"button",26),e.NdJ("click",function(){const l=e.CHM(t).index;return e.oxw().editPriorityClick(l)}),e.TgZ(5,"span",27),e._uU(6,"edit"),e.qZA()()(),e.YNc(7,pt,3,0,"button",28),e.YNc(8,dt,3,0,"button",28),e.qZA()()}if(2&a){const t=n.$implicit,i=n.index,o=e.oxw();e.xp6(2),e.Q6J("disabled",!o.enablePriorityInput&&i!=o.currentRowIndex)("ngModel",t.priority),e.xp6(1),e.Q6J("hidden",o.showCancelBtnClicked&&i==o.currentRowIndex),e.xp6(4),e.Q6J("ngIf",i==o.currentRowIndex&&o.showDoneBtnClicked),e.xp6(1),e.Q6J("ngIf",i==o.currentRowIndex&&o.showCancelBtnClicked)}}function gt(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Status "),e.qZA())}function _t(a,n){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.status," ")}}function ht(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Assigned On "),e.qZA())}function ft(a,n){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.assignedOn+"Z","medium")," ")}}function Ct(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Actions "),e.qZA())}function xt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().toggleLeadStatus(o,"STOP")}),e.TgZ(1,"span",33),e._uU(2," stop_circle "),e.qZA()()}}function Tt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().toggleLeadStatus(o,"START")}),e.TgZ(1,"span",33),e._uU(2," play_circle "),e.qZA()()}}function Zt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell"),e.YNc(1,xt,3,0,"button",29),e.YNc(2,Tt,3,0,"button",29),e.TgZ(3,"button",30),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().goToDialerDetail(l)}),e.TgZ(4,"span",27)(5,"mat-icon"),e._uU(6,"open_in_new"),e.qZA()()(),e.TgZ(7,"button",31),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().deleteLead(l)}),e.TgZ(8,"span",27)(9,"mat-icon"),e._uU(10,"delete"),e.qZA()()()()}if(2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf","Stopped"!=t.status),e.xp6(1),e.Q6J("ngIf","Stopped"==t.status)}}function bt(a,n){1&a&&e._UZ(0,"mat-header-row")}function At(a,n){1&a&&e._UZ(0,"mat-row")}function vt(a,n){1&a&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"No Records found."),e.qZA()())}const Lt=function(){return[5,10,20]};let yt=(()=>{class a{constructor(t,i,o,l,r){this._dialerDetailsService=t,this.router=i,this.dialogRef=o,this._snackbarService=l,this._emailcampaignService=r,this.resultsLength=0,this.localDirectoryPriorityColumns=["listName","totalRecords","totalDialed","priority","status","assignedOn","actions"],this.displayedColumns=["listName","totalRecords","priority","status","assignedOn","actions"],this.dialStatusDataSource=[],this.enablePriorityInput=!1,this.showEditBtnClicked=!0,this.showDoneBtnClicked=!1,this.showCancelBtnClicked=!1,console.log("Routed EmailCampaign Id: ",this.emailcampaignId)}ngOnInit(){}ngAfterViewInit(){(0,$.T)(this.sort.sortChange,this.paginator.page).pipe((0,F.O)({}),(0,j.w)(()=>this._emailcampaignService.getLeadStatus(this.emailcampaignId,this.paginator.pageIndex+1,this.paginator.pageSize)),(0,y.U)(t=>(this.resultsLength=t.result.total,console.log(t.result.items),t.result.items)),(0,z.K)(()=>(0,G.of)([]))).subscribe(t=>{this.dialStatusDataSource=t,console.log(t)})}reload(){this._emailcampaignService.getLeadStatus(this.emailcampaignId,this.paginator.pageIndex+1,this.paginator.pageSize).subscribe(t=>{console.log("The Data is: "+t.result.items),this.dialStatusDataSource=t.result.items,this.restoreChangePriorityControl()})}editPriorityClick(t){this.currentRowIndex=t,this.showDoneBtnClicked=!0,this.showCancelBtnClicked=!0,this.showEditBtnClicked=!1}restoreChangePriorityControl(){this.showDoneBtnClicked=!1,this.showCancelBtnClicked=!0,this.showCancelBtnClicked=!1,this.enablePriorityInput=!1,this.currentRowIndex=null}changeLeadPriority(t){this._emailcampaignService.changePriority(t.mapId,this.emailcampaignId,t.priority).subscribe(r=>{r&&(console.log(r),this._snackbarService.success(r.message),this.restoreChangePriorityControl())})}toggleLeadStatus(t,i){var o=new nt.G;o.campaignLeadListId=t.mapId,o.action=i,this._emailcampaignService.switchCampaignLeadState(o).subscribe(l=>{l&&("STOP"==i?(console.log(l),this._snackbarService.success(l.result),this.reload()):"START"==i&&(this._snackbarService.success(l.result),this.reload()))})}goToDialerDetail(t){window.open("/app/emailcampaign-management/email-campaign-details/"+this.email.id+"/"+t.mapId,"_blank")}deleteLead(t){this._emailcampaignService.deleteLead(t.mapId).subscribe(i=>{console.log(i),this._snackbarService.success("Lead delete successfully.")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ot.a),e.Y36(T.F0),e.Y36(C.so),e.Y36(w.k),e.Y36(E))},a.\u0275cmp=e.Xpm({type:a,selectors:[["uc-email-campaign-lead-status-dialog"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Z.NW,7),e.Gf(h.YE,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first),e.iGM(o=e.CRH())&&(i.sort=o.first)}},decls:36,vars:8,consts:[[1,"top-bg","accent"],["mat-dialog-content",""],["label","Local"],["matSort","",1,"sms-campaign-lead-status-table",3,"dataSource"],["table",""],["matColumnDef","listName"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","totalRecords"],["matColumnDef","priority"],[4,"matHeaderCellDef"],["matColumnDef","status"],["matColumnDef","assignedOn"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-icon-button","","fxLayout","column","fxLayoutAlign","center none",3,"click"],["showFirstLastButtons","",3,"length","pageSizeOptions"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","secondary",3,"click"],["mat-sort-header",""],[1,"container-priority-editor"],["matInput","","type","text",3,"disabled","ngModel","ngModelChange"],[3,"hidden"],["mat-icon-button","","color","accent",1,"priority-editor-btn",3,"click"],[1,"material-icons"],["class","priority-editor-btn","mat-icon-button","","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","color","accent",3,"click",4,"ngIf"],["target","_blank","color","accent","mat-icon-button","","color","primary",3,"click"],["color","accent","mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","accent",3,"click"],[1,"material-icons","btn-start-stop"],[1,"no-data-message"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-toolbar",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"mat-tab-group")(4,"mat-tab",2)(5,"mat-table",3,4),e.ynx(7,5),e.YNc(8,lt,2,0,"mat-header-cell",6),e.YNc(9,st,2,1,"mat-cell",7),e.BQk(),e.ynx(10,8),e.YNc(11,mt,2,0,"mat-header-cell",6),e.YNc(12,rt,2,1,"mat-cell",7),e.BQk(),e.ynx(13,9),e.YNc(14,ct,2,0,"mat-header-cell",10),e.YNc(15,ut,9,5,"mat-cell",7),e.BQk(),e.ynx(16,11),e.YNc(17,gt,2,0,"mat-header-cell",10),e.YNc(18,_t,2,1,"mat-cell",7),e.BQk(),e.ynx(19,12),e.YNc(20,ht,2,0,"mat-header-cell",10),e.YNc(21,ft,3,4,"mat-cell",7),e.BQk(),e.ynx(22,13),e.YNc(23,Ct,2,0,"mat-header-cell",10),e.YNc(24,Zt,11,2,"mat-cell",7),e.BQk(),e.YNc(25,bt,1,0,"mat-header-row",14),e.YNc(26,At,1,0,"mat-row",15),e.qZA()()(),e.YNc(27,vt,3,0,"div",16),e.TgZ(28,"div",17)(29,"button",18),e.NdJ("click",function(){return i.reload()}),e.TgZ(30,"mat-icon"),e._uU(31,"refresh"),e.qZA()(),e._UZ(32,"mat-paginator",19),e.qZA()(),e.TgZ(33,"div",20)(34,"button",21),e.NdJ("click",function(){return i.dialogRef.close(!0)}),e._uU(35,"Close"),e.qZA()()),2&t&&(e.xp6(1),e.hij("",i.email.name," Lead Status"),e.xp6(4),e.Q6J("dataSource",i.dialStatusDataSource),e.xp6(20),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("ngIf",0==i.dialStatusDataSource.length),e.xp6(5),e.Q6J("length",i.resultsLength)("pageSizeOptions",e.DdM(7,Lt)))},directives:[W.Ye,C.xY,N.SP,N.uX,c.BZ,h.YE,c.w1,c.fO,c.ge,h.nU,c.Dz,c.ev,U.Nt,s.Fj,s.JJ,s.On,v.lW,_.O5,L.Hw,c.as,c.XQ,c.nj,c.Gk,d.xw,d.Wh,Z.NW,C.H8],pipes:[_.uU],styles:["mat-table[_ngcontent-%COMP%]{width:100%}mat-table[_ngcontent-%COMP%]   .a-detail[_ngcontent-%COMP%]{cursor:pointer}mat-dialog-content[_ngcontent-%COMP%]{height:400px}.no-data-message[_ngcontent-%COMP%]{padding-top:5px;text-align:center}.dialog-container-custom[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.sms-campaign-lead-status-table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{display:flex}.sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-listName[_ngcontent-%COMP%]{flex:0 1 20%}.sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-totalRecords[_ngcontent-%COMP%], .sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-totalDialed[_ngcontent-%COMP%]{flex:0 1 10%;justify-content:center}.sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-priority[_ngcontent-%COMP%]{flex:0 1 15%;justify-content:center}.sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-status[_ngcontent-%COMP%]{flex:0 1 10%;justify-content:center}.sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-assignedOn[_ngcontent-%COMP%], .sms-campaign-lead-status-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{flex:0 1 20%}.btn-start-stop[_ngcontent-%COMP%]{font-size:34px}.container-priority-editor[_ngcontent-%COMP%]{border:1px solid rgba(221,218,218,.54);border-radius:5px;display:inherit;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.14),0 1px 5px rgba(0,0,0,.12)}.container-priority-editor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px;min-height:inherit;text-align:center;font-size:16px;font-weight:500;vertical-align:inherit}.priority-editor-btn[_ngcontent-%COMP%]{border-radius:0 5px 5px 0;height:inherit;width:25px}"]}),a})();var ne=m(55829),oe=m(48568);const wt=["searchItem"];function St(a,n){1&a&&(e.TgZ(0,"mat-header-cell",35),e._uU(1,"Name"),e.qZA())}function Dt(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",36),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.name)}}function Nt(a,n){1&a&&(e.TgZ(0,"mat-header-cell",35),e._uU(1,"Gateway"),e.qZA())}function Et(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",36),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.gateway)}}function It(a,n){1&a&&(e.TgZ(0,"mat-header-cell",37),e._uU(1,"Status"),e.qZA())}function Ut(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell",38)(1,"ui-switch",39),e.NdJ("change",function(o){const r=e.CHM(t).$implicit;return e.oxw().onCampaignStatusChange(o,r)})("ngModelChange",function(o){return e.CHM(t).$implicit.status=o}),e.qZA()()}if(2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngModel",t.status)}}function Rt(a,n){1&a&&(e.TgZ(0,"mat-header-cell",35),e._uU(1,"Start Date"),e.qZA())}function kt(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",36),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.AsE("",t.startDate," ",t.startTime,"")}}function qt(a,n){1&a&&(e.TgZ(0,"mat-header-cell",35),e._uU(1,"Stop Date"),e.qZA())}function Ft(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",36),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.AsE("",t.stopDate," ",t.stopTime,"")}}function Jt(a,n){1&a&&(e.TgZ(0,"mat-header-cell",35),e._uU(1,"Campaign Progress"),e.qZA())}function Mt(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"progress",40),e._uU(2,"Hello"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&a){const t=n.$implicit;e.xp6(1),e.s9C("value",t.emailCampaignProgress.campaignProgress),e.xp6(3),e.hij("",t.emailCampaignProgress.campaignProgress,"%")}}function Ht(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"LeadList"),e.qZA())}function Qt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"a",41),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().assignList(l)}),e._uU(2,"Assign "),e.qZA(),e._uU(3," || "),e.TgZ(4,"a",41),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().openDialStatsDialog(l)}),e._uU(5,"View"),e.qZA()()}}function Pt(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"Actions"),e.qZA())}function Yt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",42),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"mat-icon",43),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,44)(6,"button",45)(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Edit"),e.qZA()(),e.TgZ(11,"button",46),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().deleteEmailCampaign(l)}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"Remove"),e.qZA()()()()}if(2&a){const t=n.$implicit,i=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(5),e.Q6J("routerLink","/app/emailcampaign-management/email/"+t.id)}}function Ot(a,n){1&a&&e._UZ(0,"mat-header-row")}function Bt(a,n){1&a&&e._UZ(0,"mat-row",47)}function $t(a,n){1&a&&(e.TgZ(0,"div",48)(1,"span"),e._uU(2,"No Records found."),e.qZA()())}const Gt=function(){return{delay:"50ms",scale:"0.2"}},le=function(a){return{value:"*",params:a}},jt=function(){return{delay:"100ms",x:"-25px"}},zt=function(){return{value:"50"}},Wt=function(){return[5,10,15,30]};let se=(()=>{class a{constructor(t,i,o,l){this._emailcampaignService=t,this._matDialog=i,this._snackbarService=o,this._emailconfigurtion=l,this.filteredAndPagedLists=[],this.resultsLength=0,this.gateways=[],this.displayedColumns=["name","gateway","campaignStatus","startDatetime","stopDatetime","campaignProgress","assign","actions"],this._emailconfigurtion.getAll(1,200).subscribe(r=>{this.gateways=r.result.items})}ngOnInit(){}ngAfterViewInit(){let t=(0,ye.R)(this.searchItem.nativeElement,"keyup").pipe((0,we.b)(800),(0,Se.x)());(0,$.T)(this.sort.sortChange,this.paginator.page,t).pipe((0,F.O)({}),(0,j.w)(()=>this._emailcampaignService.getAll(this.paginator.pageIndex+1,this.paginator.pageSize,this.searchItem.nativeElement.value)),(0,y.U)(i=>(this.resultsLength=i.result.total,i.result.items)),(0,z.K)(()=>(0,G.of)([]))).subscribe(i=>{const l=i.map(r=>{const u=r.gateway,f=this.gateways.find(A=>A.id===u).name;return r.gateway=f,r});this.filteredAndPagedLists=l,console.log(i)})}reload(){this._emailcampaignService.getAll(this.paginator.pageIndex+1,this.paginator.pageSize,this.searchItem.nativeElement.value).subscribe(t=>{const o=t.result.items.map(l=>{const r=l.gateway,u=this.gateways.find(f=>f.id===r).name;return l.gateway=u,l});this.filteredAndPagedLists=o,console.log(t)})}onSelectedChange(t){console.log(t)}onCampaignStatusChange(t,i){this._emailcampaignService.changeCampaignState(i.id,t).subscribe(o=>{console.log("Campaign state changed:",o.result),this._snackbarService.success("Campaign state changed successfully.")})}clearActiveRecords(t){this._emailcampaignService.removeActiveRecords(t.id).subscribe(i=>{i.result&&this._snackbarService.success("Removed records successfully.")})}assignList(t){this.assignLeadDialogRef=this._matDialog.open(it),this.assignLeadDialogRef.componentInstance.emailcampaignId=t.id,this.assignLeadDialogRef.componentInstance.email=t,this.assignLeadDialogRef.afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}openDialStatsDialog(t){this.dialStatsDialogRef=this._matDialog.open(yt,{width:"1000px"}),this.dialStatsDialogRef.componentInstance.emailcampaignId=t.id,this.dialStatsDialogRef.componentInstance.email=t,this.dialStatsDialogRef.afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}deleteEmailCampaign(t){this.confirmDialogRef=this._matDialog.open(De.J,{disableClose:!1}),this.confirmDialogRef.componentInstance.confirmMessage=`Are you sure you want to delete ${t.name} campaign?`,this.confirmDialogRef.afterClosed().subscribe(i=>{i&&this._emailcampaignService.deleteCampaign(t.id).subscribe(o=>{o&&(this._snackbarService.success(`Campaign ${t.name} deleted successfully.`),this.filteredAndPagedLists.splice(this.filteredAndPagedLists.findIndex(l=>l.id==t.id),1),this.matEmailCampaignTable.renderRows())}),this.confirmDialogRef=null})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(E),e.Y36(C.uw),e.Y36(w.k),e.Y36(ae.E))},a.\u0275cmp=e.Xpm({type:a,selectors:[["uc-campaign-home"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Z.NW,7),e.Gf(h.YE,7),e.Gf(c.BZ,5),e.Gf(wt,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first),e.iGM(o=e.CRH())&&(i.sort=o.first),e.iGM(o=e.CRH())&&(i.matEmailCampaignTable=o.first),e.iGM(o=e.CRH())&&(i.searchItem=o.first)}},decls:56,vars:20,consts:[["id","emailcampaign",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","column","fxLayoutAlign","center center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","s-32","mr-16"],[1,"logo-text","h1"],[1,"search-wrapper","mx-32","mx-md-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["placeholder","Search for a email campaign"],["searchItem",""],["mat-raised-button","",1,"cuc-white","mt-md-0",3,"routerLink"],[1,"content-card"],["matSort","","cucPerfectScrollbar","",1,"emailcampaign-table",3,"dataSource"],["matEmailCampaignTable",""],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","gateway"],["matColumnDef","campaignStatus"],["mat-sort-header","","fxHide","","fxShow.gt-xs","",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-xs","",4,"matCellDef"],["matColumnDef","startDatetime"],["matColumnDef","stopDatetime"],["matColumnDef","campaignProgress"],["matColumnDef","assign"],[4,"matHeaderCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","camapign",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-icon-button","","fxLayout","column","fxLayoutAlign","center center",3,"click"],[3,"length","pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""],[1,"text-truncate"],["mat-sort-header","","fxHide","","fxShow.gt-xs",""],["fxHide","","fxShow.gt-xs",""],["switchColor","accent","size","small",3,"ngModel","change","ngModelChange"],["max","100","color","green",2,"border","2px solid white","border-radius","10px",3,"value"],[3,"click"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],[1,"secondary-text"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","edit",3,"routerLink"],["mat-menu-item","","aria-label","remove",3,"click"],[1,"camapign"],[1,"no-data-message"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon",5),e._uU(6," email "),e.qZA(),e.TgZ(7,"span",6),e._uU(8," Email Campaign Management "),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"mat-icon"),e._uU(12,"search"),e.qZA(),e._UZ(13,"input",9,10),e.qZA()(),e.TgZ(15,"button",11)(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.TgZ(18,"span"),e._uU(19,"Add New Campaign"),e.qZA()()(),e.TgZ(20,"div",12)(21,"mat-table",13,14),e.ynx(23,15),e.YNc(24,St,2,0,"mat-header-cell",16),e.YNc(25,Dt,3,1,"mat-cell",17),e.BQk(),e.ynx(26,18),e.YNc(27,Nt,2,0,"mat-header-cell",16),e.YNc(28,Et,3,1,"mat-cell",17),e.BQk(),e.ynx(29,19),e.YNc(30,It,2,0,"mat-header-cell",20),e.YNc(31,Ut,2,1,"mat-cell",21),e.BQk(),e.ynx(32,22),e.YNc(33,Rt,2,0,"mat-header-cell",16),e.YNc(34,kt,3,2,"mat-cell",17),e.BQk(),e.ynx(35,23),e.YNc(36,qt,2,0,"mat-header-cell",16),e.YNc(37,Ft,3,2,"mat-cell",17),e.BQk(),e.ynx(38,24),e.YNc(39,Jt,2,0,"mat-header-cell",16),e.YNc(40,Mt,5,2,"mat-cell",17),e.BQk(),e.ynx(41,25),e.YNc(42,Ht,2,0,"mat-header-cell",26),e.YNc(43,Qt,6,0,"mat-cell",17),e.BQk(),e.ynx(44,27),e.YNc(45,Pt,2,0,"mat-header-cell",26),e.YNc(46,Yt,16,2,"mat-cell",17),e.BQk(),e.YNc(47,Ot,1,0,"mat-header-row",28),e.YNc(48,Bt,1,0,"mat-row",29),e.qZA(),e.YNc(49,$t,3,0,"div",30),e.TgZ(50,"div",31)(51,"button",32),e.NdJ("click",function(){return i.reload()}),e.TgZ(52,"mat-icon"),e._uU(53,"refresh"),e.qZA()(),e._UZ(54,"mat-paginator",33,34),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("@animate",e.VKq(13,le,e.DdM(12,Gt))),e.xp6(2),e.Q6J("@animate",e.VKq(16,le,e.DdM(15,jt))),e.xp6(8),e.Q6J("routerLink","/app/emailcampaign-management/email/new"),e.xp6(6),e.Q6J("dataSource",i.filteredAndPagedLists)("@animateStagger",e.DdM(18,zt)),e.xp6(26),e.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("ngIf",0==i.filteredAndPagedLists.length),e.xp6(5),e.Q6J("length",i.resultsLength)("pageSize",5)("pageSizeOptions",e.DdM(19,Wt)))},directives:[Y.V,d.xw,d.Wh,L.Hw,d.yH,v.lW,T.rH,c.BZ,h.YE,O.i,c.w1,c.fO,c.ge,h.nU,c.Dz,c.ev,ne.b8,oe.o,s.JJ,s.On,k.p6,k.VK,k.OP,c.as,c.XQ,c.nj,c.Gk,_.O5,Z.NW],styles:["@media screen and (max-width: 959px){uc-campaign-home #emailcampaign .top-bg{height:256px}}uc-campaign-home #emailcampaign>.center>.header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px rgba(0,0,0,.14),0 1px 3px rgba(0,0,0,.12)}@media screen and (max-width: 599px){uc-campaign-home #emailcampaign>.center>.header .search-wrapper{width:100%}}uc-campaign-home #emailcampaign>.center>.header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}uc-campaign-home #emailcampaign>.center>.header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media screen and (max-width: 959px){uc-campaign-home #emailcampaign>.center>.header{padding:8px 0;height:192px!important;min-height:192px!important;max-height:192px!important}}uc-campaign-home .emailcampaign-table{flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}uc-campaign-home .emailcampaign-table .mat-header-row{min-height:64px}uc-campaign-home .emailcampaign-table .smscamapign{position:relative;height:60px}uc-campaign-home .emailcampaign-table .mat-column-name{flex:0 0 15%}uc-campaign-home .emailcampaign-table .mat-column-gateway{flex:0 0 10%;justify-content:center}uc-campaign-home .emailcampaign-table .mat-column-assign{flex:0 0 15%;justify-content:center}uc-campaign-home .emailcampaign-table .mat-column-assign a{cursor:pointer}uc-campaign-home .emailcampaign-table .mat-column-actions{flex:0 0 5%}uc-campaign-home .emailcampaign-table .mat-column-campaignStatus{flex:0 0 6%;justify-content:center}uc-campaign-home .emailcampaign-table .mat-column-startDatetime{flex:0 0 15%;justify-content:center}uc-campaign-home .emailcampaign-table .mat-column-stopDatetime{flex:0 0 15%;justify-content:center}uc-campaign-home .emailcampaign-table .mat-column-campaignProgress{flex:0 1 20%;justify-content:center}uc-campaign-home .emailcampaign-table .mat-column-campaignProgress progress{width:200px;height:25px}uc-campaign-home .emailcampaign-table .mat-column-campaignProgress progress ::-webkit-progress-value{background-color:#4caf50;-webkit-transition:width 1s;transition:width 1s}uc-campaign-home .emailcampaign-table .active-icon{border-radius:50%}uc-campaign-home .no-data-message{padding-top:5px;text-align:center}\n"],encapsulation:2,data:{animation:P.J}}),a})();var me=m(8277),Vt=m(94327);let Xt=(()=>{class a{constructor(t){this._http=t,this.API_BASE_URL=te.N.apiUrl}emailDetails(t,i,o=null,l=null,r,u,f=1,A=10,I=""){let Q=this.API_BASE_URL+"api/email-details",p=new g.LE;return p=p.set("emailcampaignId",t.toString()).set("mapId",i.toString()),o&&(p=p.set("recordStatus",o)),l&&(p=p.set("recordResult",l)),I&&(p=p.set("search",I)),r&&(p=p.set("sortBy",r)),p=p.set("sortDir","desc"==u?b.fe.DESC.toString():b.fe.ASC.toString()),p=p.set("index",f.toString()).set("size",A.toString()),this._http.get(Q,{params:p})}changeWeightage(t,i){let o=this.API_BASE_URL+`api/campaignlead/${t}/change-weightage`,l=new g.LE;return l=l.set("newWeightage",i.toString()),this._http.get(o,{params:l})}changePriority(t,i,o){let l=this.API_BASE_URL+"api/campaignlead/change-priority",r=new g.LE;return r=r.set("mapId",t.toString()).set("campaignId",i.toString()).set("newPriority",o.toString()),this._http.get(l,{params:r})}getLeadStats(t,i,o){return this._http.get(this.API_BASE_URL+"api/campaignlead/lead-stats",{params:(new g.LE).set("campaignId",t.toString())})}getLeadStatsSF(t,i,o){return this._http.get(this.API_BASE_URL+"api/campaignlead/lead-stats-salesforce",{params:(new g.LE).set("campaignId",t.toString())})}downloadDialerReport(t,i=null,o=null){let l=this.API_BASE_URL+"api/dialer-details/download",r=new g.LE;return r=r.set("mapId",t.toString()),i&&(r=r.set("recordStatus",i)),o&&(r=r.set("recordResut",o)),this._http.get(l,{observe:"response",responseType:"blob",params:r}).pipe((0,y.U)(u=>{u.headers.get("file-name");let A=u.headers.get("content-type"),Q={blob:new Blob([u.body],{type:A}),fileName:"dialer_detail"+(new Date).toString()+".csv"};return console.log("File download data:",Q),Q}))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(g.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Kt=m(17622),re=m(44850);const ea=["filter"],ta=["input"];function aa(a,n){if(1&a&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text,"")}}function ia(a,n){if(1&a&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text,"")}}function na(a,n){1&a&&(e.TgZ(0,"mat-header-cell",34),e._uU(1," Name"),e.qZA())}function oa(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",35),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.AsE("",t.firstName," ",t.lastName,"")}}function la(a,n){1&a&&(e.TgZ(0,"mat-header-cell",36),e._uU(1,"Email To"),e.qZA())}function sa(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",35),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.emailTo)}}function ma(a,n){1&a&&(e.TgZ(0,"mat-header-cell",36),e._uU(1,"Email Status"),e.qZA())}function ra(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",35),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.emailStatus)}}function ca(a,n){1&a&&(e.TgZ(0,"mat-header-cell",36),e._uU(1,"Email Result"),e.qZA())}function pa(a,n){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",35),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.emailResult)}}function da(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Imported DateTime "),e.qZA())}function ua(a,n){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.importedDateTime+"Z","medium")," ")}}function ga(a,n){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Processed On "),e.qZA())}function _a(a,n){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.processedOn+"Z","medium")," ")}}function ha(a,n){1&a&&e._UZ(0,"mat-header-row")}function fa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().toggleRow(l)}),e.qZA()}}const Ca=function(){return{value:"50"}},xa=function(){return[5,10,25,50]};let Ta=(()=>{class a{constructor(t,i,o,l,r){this._emailDetailsService=t,this._activatedRoute=i,this._matDialog=o,this._cucConfigService=l,this._toastService=r,this.recordStatuses=b.rf,this.recordResults=b.$O,this.filteredAndPagedLists=[],this.resultsLength=0,this.isFilterAreaVisible=!1,this.displayedColumns=["name","emailTo","emailStatus","emailResult","importedDateTime","processedOn"],this.listName="",this.routeParams=this._activatedRoute.params,this.emailcampaign=new q,this._cucConfigService.config={layout:{navbar:{hidden:!1,folded:!0},toolbar:{hidden:!1},footer:{hidden:!1},sidepanel:{hidden:!0}}}}ngOnInit(){this.filterApplyForm=new s.cw({recordStatus:new s.NI(""),recordResult:new s.NI("")})}ngAfterViewInit(){(0,$.T)(this.sort.sortChange,this.paginator.page).pipe((0,F.O)({}),(0,j.w)(()=>this._emailDetailsService.emailDetails(this.routeParams.value.emailcampaignId,this.routeParams.value.mapId,this.selectedRecordStatus,this.selectedRecordResult,this.sort.active,this.sort.direction,this.paginator.pageIndex+1,this.paginator.pageSize)),(0,y.U)(t=>t),(0,z.K)(()=>(0,G.of)([]))).subscribe(t=>{t.result&&(this.resultsLength=t.result.total,this.filteredAndPagedLists=t.result.items,this.listName=t.result.items[0].listName),console.log(t)})}submitFiltersForm(){this._emailDetailsService.emailDetails(this.emailcampaignId,this.mapId,this.selectedRecordStatus,this.selectedRecordResult,this.sort.active,this.sort.direction,this.paginator.pageIndex+1,this.paginator.pageSize).subscribe(t=>{t.result&&(this.resultsLength=t.result.total,this.filteredAndPagedLists=t.result.items)})}resetFiltersForm(){this.selectedRecordStatus=null,this.selectedRecordResult=null,this.submitFiltersForm(),this.filterApplyForm.reset()}disableApplyButton(t,i,o){return null==t&&null==t&&null==i&&null==i&&null==o&&null==o}disableRechurnButton(t,i){return!(null!=t&&null!=t||null!=i&&null!=i)}recordStatusSelectionChange(t){console.log(t)}recordResultSelectionChange(t){console.log(t)}toggleRow(t){0!=t.emailResults.length&&(this.currentExpandedRow=this.currentExpandedRow===t?null:t)}isExpandedRow(t){return this.currentExpandedRow&&t.dialerId==this.currentExpandedRow.dialerId}downloadReport(){this._emailDetailsService.downloadDialerReport(this.routeParams.value.mapId,this.selectedRecordStatus,this.selectedRecordResult).subscribe(l=>{console.log(l),Vt.saveAs(l.blob,l.fileName)},l=>{console.log("Error downloading the file")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Xt),e.Y36(T.gz),e.Y36(C.uw),e.Y36(Kt.F),e.Y36(w.k))},a.\u0275cmp=e.Xpm({type:a,selectors:[["uc-email-campaign-details"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Z.NW,7),e.Gf(h.YE,7),e.Gf(ea,7),e.Gf(ta,7),e.Gf(c.BZ,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first),e.iGM(o=e.CRH())&&(i.sort=o.first),e.iGM(o=e.CRH())&&(i.filter=o.first),e.iGM(o=e.CRH())&&(i.input=o.first),e.iGM(o=e.CRH())&&(i.matSendDetailsTable=o.first)}},decls:58,vars:17,consts:[["id","email-campaign-details",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"center"],[1,"send-detail-header"],["hideToggle",""],[2,"display","contents"],["fxLayout","row","fxLayoutGap","20px",1,"form-lead-assign",3,"formGroup"],["appearance","outline","floatlabel","always",1,"w-30-p"],["name","type","formControlName","recordStatus",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","type","formControlName","recordResult",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","secondary",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"content-card"],["multiTemplateDataRows","","matSort","","cucPerfectScrollbar","",1,"send-details-table",3,"dataSource"],["table",""],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","emailTo"],["mat-sort-header","","fxHide","","fxShow.gt-xs","",4,"matHeaderCellDef"],["matColumnDef","emailStatus"],["matColumnDef","emailResult"],["matColumnDef","importedDateTime"],[4,"matHeaderCellDef"],["matColumnDef","processedOn"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","email-record","matRipple","",3,"click",4,"matRowDef","matRowDefColumns"],["fxLayout","row","fxLayoutAlign","end center"],["mat-icon-button","","fxLayout","column","fxLayoutAlign","center none",3,"click"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"value"],["mat-sort-header",""],[1,"text-truncate"],["mat-sort-header","","fxHide","","fxShow.gt-xs",""],["matRipple","",1,"email-record",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-expansion-panel",3)(4,"mat-expansion-panel-header")(5,"mat-panel-title"),e._uU(6," Filters "),e.qZA(),e.TgZ(7,"mat-panel-description",4)(8,"mat-icon"),e._uU(9,"filter_list"),e.qZA()()(),e.TgZ(10,"form",5)(11,"mat-form-field",6)(12,"mat-label"),e._uU(13,"Email Status"),e.qZA(),e.TgZ(14,"mat-select",7),e.NdJ("ngModelChange",function(l){return i.selectedRecordStatus=l})("ngModelChange",function(){return i.recordStatusSelectionChange(i.selectedRecordStatus)}),e.YNc(15,aa,2,2,"mat-option",8),e.qZA()(),e.TgZ(16,"mat-form-field",6)(17,"mat-label"),e._uU(18,"Email Result"),e.qZA(),e.TgZ(19,"mat-select",9),e.NdJ("ngModelChange",function(l){return i.selectedRecordResult=l})("ngModelChange",function(){return i.recordResultSelectionChange(i.selectedRecordResult)}),e.YNc(20,ia,2,2,"mat-option",8),e.qZA()()(),e.TgZ(21,"div",10)(22,"button",11),e.NdJ("click",function(){return i.submitFiltersForm()}),e._uU(23," Apply "),e.qZA(),e.TgZ(24,"button",12),e.NdJ("click",function(){return i.resetFiltersForm()}),e._uU(25," Reset "),e.qZA(),e.TgZ(26,"button",13),e.NdJ("click",function(){return i.downloadReport()}),e._uU(27," Download "),e.qZA()()()(),e.TgZ(28,"div",14),e._UZ(29,"mat-divider"),e.TgZ(30,"mat-table",15,16),e.ynx(32,17),e.YNc(33,na,2,0,"mat-header-cell",18),e.YNc(34,oa,3,2,"mat-cell",19),e.BQk(),e.ynx(35,20),e.YNc(36,la,2,0,"mat-header-cell",21),e.YNc(37,sa,3,1,"mat-cell",19),e.BQk(),e.ynx(38,22),e.YNc(39,ma,2,0,"mat-header-cell",21),e.YNc(40,ra,3,1,"mat-cell",19),e.BQk(),e.ynx(41,23),e.YNc(42,ca,2,0,"mat-header-cell",21),e.YNc(43,pa,3,1,"mat-cell",19),e.BQk(),e.ynx(44,24),e.YNc(45,da,2,0,"mat-header-cell",25),e.YNc(46,ua,3,4,"mat-cell",19),e.BQk(),e.ynx(47,26),e.YNc(48,ga,2,0,"mat-header-cell",25),e.YNc(49,_a,3,4,"mat-cell",19),e.BQk(),e.YNc(50,ha,1,0,"mat-header-row",27),e.YNc(51,fa,1,0,"mat-row",28),e.qZA(),e.TgZ(52,"div",29)(53,"button",30),e.NdJ("click",function(){return i.submitFiltersForm()}),e.TgZ(54,"mat-icon"),e._uU(55,"refresh"),e.qZA()(),e._UZ(56,"mat-paginator",31,32),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",i.filterApplyForm)("formGroup",i.filterApplyForm),e.xp6(4),e.Q6J("ngModel",i.selectedRecordStatus),e.xp6(1),e.Q6J("ngForOf",i.recordStatuses),e.xp6(4),e.Q6J("ngModel",i.selectedRecordResult),e.xp6(1),e.Q6J("ngForOf",i.recordResults),e.xp6(10),e.Q6J("dataSource",i.filteredAndPagedLists)("@animateStagger",e.DdM(15,Ca)),e.xp6(20),e.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(5),e.Q6J("length",i.resultsLength)("pageIndex",0)("pageSize",10)("pageSizeOptions",e.DdM(16,xa)))},directives:[Y.V,D.ib,D.yz,D.yK,D.u4,L.Hw,s._Y,s.JL,d.xw,d.SQ,s.sg,x.KE,x.hX,R.gD,s.JJ,s.u,_.sg,S.ey,v.lW,re.d,c.BZ,h.YE,O.i,c.w1,c.fO,c.ge,h.nU,c.Dz,c.ev,ne.b8,c.as,c.XQ,c.nj,c.Gk,S.wG,d.Wh,Z.NW],pipes:[_.uU],styles:["@media screen and (max-width: 959px){uc-email-campaign-details #emailcampaign-details .top-bg{height:256px}}uc-email-campaign-details #emailcampaign-details>.center>.header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;text-align:center!important;margin-left:30%!important;margin-top:40px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px rgba(0,0,0,.14),0 1px 3px rgba(0,0,0,.12)}@media screen and (max-width: 599px){uc-email-campaign-details #emailcampaign-details>.center>.header .search-wrapper{width:100%}}uc-email-campaign-details #emailcampaign-details>.center>.header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}uc-email-campaign-details #emailcampaign-details>.center>.header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media screen and (max-width: 959px){uc-email-campaign-details #emailcampaign-details>.center>.header{padding:8px 0;height:192px!important;min-height:0px!important;max-height:192px!important}}uc-email-campaign-details .send-detail-header{margin-top:10px;margin-bottom:10px}uc-email-campaign-details .example-headers-align .mat-form-field+.mat-form-field{margin-left:8px}uc-email-campaign-details .send-details-table{flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}uc-email-campaign-details .send-details-table .mat-header-row{min-height:64px}uc-email-campaign-details .send-details-table .email-record{position:relative;cursor:pointer;height:50px}uc-email-campaign-details .send-details-table .mat-cell{min-width:0;display:flex;align-items:center}uc-email-campaign-details .send-details-table .mat-column-mailTo{flex:0 1 10%}uc-email-campaign-details .send-details-table .mat-column-name{flex:0 1 15%}uc-email-campaign-details .send-details-table .mat-column-dialDateTime{flex:0 1 15%}uc-email-campaign-details .send-details-table .mat-column-attemptedDialWindow{flex:0 1 15%}uc-email-campaign-details .send-details-table .mat-column-emailStatus{flex:0 1 15%}uc-email-campaign-details .send-details-table .mat-column-emailResult{flex:0 1 15%}uc-email-campaign-details .send-details-table .active-icon{border-radius:50%}uc-email-campaign-details .spacer{flex:1 1 auto}uc-email-campaign-details .example-detail-row{height:0;min-height:auto;display:none;width:100%}uc-email-campaign-details .display-expanded-row{display:inline-block;height:auto}\n"],encapsulation:2,data:{animation:P.J}}),a})();var Za=m(90782);const ba=[{path:"",component:se},{path:"emails",component:se},{path:"email/:id",component:ie},{path:"email/:id/:handle",component:ie},{path:"email-campaign-details/:emailcampaignId/:mapId",component:Ta}];let Aa=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[E,{provide:me.o8,useValue:{useUtc:!0}}],imports:[[s.u5,_.ez,T.Bz.forChild(ba),H.T5,oe.S,B.Bb,Za.N6,v.ot,de.Hi,re.t,D.To,x.lN,L.Ps,U.c,Z.TU,S.si,R.LD,h.JX,ue.ZX,c.p0,N.Nh,K.p9,k.Tx,J.FA,W.g0,ce.QW,C.Is,V.Fk,pe.A,ee.lJ,ee.QH],me.Yd]}),a})()}}]);