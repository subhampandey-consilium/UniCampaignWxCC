"use strict";(self.webpackChunkuni_connect=self.webpackChunkuni_connect||[]).push([[1077],{68117:(H,b,r)=>{r.d(b,{$O:()=>S,B3:()=>v,Fn:()=>p,LE:()=>A,SQ:()=>h,Sr:()=>T,XL:()=>u,e_:()=>Z,fe:()=>N,j1:()=>g,jY:()=>f,rf:()=>_,sH:()=>x,ye:()=>d});var d=(()=>{return(t=d||(d={}))[t.Select=-1]="Select",t[t.LocalDirectory=1]="LocalDirectory",t[t.FTP=2]="FTP",t[t.SFTP=3]="SFTP",t[t.Salesforce=4]="Salesforce",d;var t})(),v=(()=>{return(t=v||(v={}))[t.Voice=1]="Voice",t[t.SMS=2]="SMS",t[t.Whatsapp=6]="Whatsapp",t[t.Email=4]="Email",t[t.DNC=3]="DNC",t[t.All=5]="All",v;var t})(),f=(()=>{return(t=f||(f={}))[t.Voice=1]="Voice",t[t.SMS=2]="SMS",t[t.Email=4]="Email",t[t.Whatsapp=6]="Whatsapp",f;var t})(),p=(()=>{return(t=p||(p={}))[t.None=0]="None",t[t.And=1]="And",t[t.Or=2]="Or",p;var t})(),h=(()=>{return(t=h||(h={}))[t.None=0]="None",t[t.Equal=1]="Equal",t[t.NotEqual=2]="NotEqual",t[t.GreaterThan=3]="GreaterThan",t[t.LessThan=4]="LessThan",t[t.GreaterOrEqual=5]="GreaterOrEqual",t[t.LessOrEqual=6]="LessOrEqual",t[t.Like=7]="Like",t[t.NotLike=8]="NotLike",t[t.Null=9]="Null",t[t.NotNull=10]="NotNull",t[t.Contains=11]="Contains",t[t.DoesNotContain=12]="DoesNotContain",t[t.BeginsWith=13]="BeginsWith",t[t.DoesNotBeginWith=14]="DoesNotBeginWith",t[t.EndsWith=15]="EndsWith",t[t.DoesNotEndWith=16]="DoesNotEndWith",h;var t})(),_=(()=>{return(t=_||(_={}))[t.Pending=1]="Pending",t[t.Duplicate=3]="Duplicate",t[t.Invalid=4]="Invalid",t[t.Excluded=6]="Excluded",t[t.Retry=7]="Retry",t[t.Imported=9]="Imported",t[t.Failed=10]="Failed",t[t.Deleted=11]="Deleted",t[t.Completed=12]="Completed",t[t.BlockedByTCPA=18]="BlockedByTCPA",t[t.Transitioned_To_SMS_Or_Email=20]="Transitioned_To_SMS_Or_Email",t[t.Received=21]="Received",t[t.Sent=22]="Sent",t[t.DoNotCall=23]="DoNotCall",_;var t})(),S=(()=>{return(t=S||(S={}))[t.Pending=0]="Pending",t[t.AnswerSuccess=10]="AnswerSuccess",t[t.SIT_UnCallable=11]="SIT_UnCallable",t[t.AnsweringMachine=12]="AnsweringMachine",t[t.NumberCouldNotBeDialed=13]="NumberCouldNotBeDialed",t[t.BusySignal=14]="BusySignal",t[t.Voice=16]="Voice",t[t.AbandonedByAgent=17]="AbandonedByAgent",t[t.NoAnswer=8]="NoAnswer",t[t.SkippedOrRejected=18]="SkippedOrRejected",t[t.SkippedOrRejectedWithClose=19]="SkippedOrRejectedWithClose",t[t.TimedOutAcceptingPreviewCall=33]="TimedOutAcceptingPreviewCall",t[t.OutboundDisconnect=50]="OutboundDisconnect",t[t.AgentUnreachable=51]="AgentUnreachable",t[t.WrapupTimeOut=52]="WrapupTimeOut",t[t.StuckInteraction=11]="StuckInteraction",t[t.Sent=61]="Sent",t[t.Fail=62]="Fail",t[t.UnSuccessful=63]="UnSuccessful",t[t.Deliverd=64]="Deliverd",t[t.UnDelivered=65]="UnDelivered",t[t.Delivery_Unknown=66]="Delivery_Unknown",t[t.Queued=67]="Queued",S;var t})(),T=(()=>{return(t=T||(T={}))[t.Pending=1]="Pending",t[t.Active=2]="Active",t[t.Completed=3]="Completed",t[t.Expired=4]="Expired",t[t.InActive=5]="InActive",T;var t})(),A=(()=>{return(t=A||(A={}))[t.Never=0]="Never",t[t.Daily=1]="Daily",t[t.Weeks=2]="Weeks",t[t.Months=3]="Months",t[t.Years=4]="Years",A;var t})(),x=(()=>{return(t=x||(x={}))[t.Pending=1]="Pending",t[t.Active=2]="Active",t[t.Completed=3]="Completed",x;var t})(),N=(()=>{return(t=N||(N={}))[t.ASC=1]="ASC",t[t.DESC=2]="DESC",N;var t})(),Z=(()=>{return(t=Z||(Z={}))[t.Single=0]="Single",t[t.Incremental=1]="Incremental",t[t.Repetitive=2]="Repetitive",Z;var t})(),g=(()=>{return(t=g||(g={}))[t.Seconds=0]="Seconds",t[t.Minutes=1]="Minutes",t[t.Hours=2]="Hours",t[t.Days=3]="Days",t[t.Weeks=4]="Weeks",t[t.Months=5]="Months",t[t.Year=6]="Year",t[t.None=9]="None",g;var t})(),u=(()=>{return(t=u||(u={}))[t.Pending=0]="Pending",t[t.InvalidNumber=1]="InvalidNumber",t[t.NoAnswer=2]="NoAnswer",t[t.Busy=3]="Busy",t[t.Fax=4]="Fax",t[t.AnsweringMachine=5]="AnsweringMachine",t[t.NetworkVoicemail=6]="NetworkVoicemail",t[t.NoRingback=7]="NoRingback",t[t.OperatorIntercept=8]="OperatorIntercept",t[t.Callback_Requested=9]="Callback_Requested",t[t.Abandoned=10]="Abandoned",t[t.AbandonedToIVR=11]="AbandonedToIVR",t[t.Flushed_Camp_Stop=12]="Flushed_Camp_Stop",t[t.Gaurd_Time_Expiry=13]="Gaurd_Time_Expiry",t[t.Flushed_Error=14]="Flushed_Error",t[t.DNC_Requested=15]="DNC_Requested",t[t.Live_Voice=16]="Live_Voice",t[t.Invalid_Cad=17]="Invalid_Cad",t[t.Dial_At_Time_Invalid=18]="Dial_At_Time_Invalid",u;var t})()},51077:(H,b,r)=>{r.r(b),r.d(b,{CSRModule:()=>Ye});var d=r(93917),w=r(4859),v=r(3238),f=r(59549),p=r(73546),h=r(97392),_=r(44144),S=r(84385),T=r(56709),A=r(8882),x=r(82689),N=r(77331),Z=r(37084),g=r(27974),u=r(96308),t=r(17009),c=r(2143),D=r(3848),y=r(28255),L=r(79497),V=r(77394),P=r(23753),G=r(36787),$=r(21086),j=r(1059),O=r(87545),z=r(24850),X=r(27221),e=r(94650),I=r(69061),K=r(65938),E=r(6072),Q=r(96560),C=r(1576),Y=r(43764),F=r(36895);const W=["searchCSR"];function R(a,i){1&a&&(e.TgZ(0,"mat-header-cell",29),e._uU(1," Name"),e.qZA())}function ee(a,i){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",30),e._uU(2),e.qZA()()),2&a){const n=i.$implicit;e.xp6(2),e.Oqu(n.name)}}function te(a,i){1&a&&(e.TgZ(0,"mat-header-cell",29),e._uU(1,"TemplateName"),e.qZA())}function ne(a,i){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",30),e._uU(2),e.qZA()()),2&a){const n=i.$implicit;e.xp6(2),e.Oqu(n.templateName)}}function ae(a,i){1&a&&(e.TgZ(0,"mat-header-cell",29),e._uU(1,"Created On"),e.qZA())}function oe(a,i){if(1&a&&(e.TgZ(0,"mat-cell")(1,"p",30),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&a){const n=i.$implicit;e.xp6(2),e.Oqu(e.xi3(3,1,n.createdOn+"Z","medium"))}}function ie(a,i){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"Actions"),e.qZA())}function re(a,i){if(1&a){const n=e.EpF();e.TgZ(0,"mat-cell")(1,"button",31),e.NdJ("click",function(m){return m.stopPropagation()}),e.TgZ(2,"mat-icon",32),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,33)(6,"button",34)(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Edit"),e.qZA()(),e.TgZ(11,"button",35),e.NdJ("click",function(){const l=e.CHM(n).$implicit;return e.oxw().deleteCSR(l)}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"Delete"),e.qZA()()()()}if(2&a){const n=i.$implicit,o=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("routerLink","/app/csr-management/csr/"+n.id)}}function me(a,i){1&a&&e._UZ(0,"mat-header-row")}function ce(a,i){1&a&&e._UZ(0,"mat-row",36)}function se(a,i){1&a&&(e.TgZ(0,"div",37)(1,"span"),e._uU(2,"No Records found."),e.qZA()())}const le=function(){return{delay:"50ms",scale:"0.2"}},M=function(a){return{value:"*",params:a}},de=function(){return{delay:"100ms",x:"-25px"}},pe=function(){return{value:"50"}},ue=function(){return[10,25,100]};let B=(()=>{class a{constructor(n,o,m){this._csrService=n,this._matDialog=o,this._snackbarService=m,this.filteredAndPagedLists=[],this.displayedColumns=["name","templateName","createdOn","actions"],this.resultsLength=0}ngOnInit(){}ngAfterViewInit(){let n=(0,P.R)(this.searchCSR.nativeElement,"keyup");(0,G.T)(this.sort.sortChange,this.paginator.page,n).pipe((0,j.O)({}),(0,O.w)(()=>this._csrService.getAll(this.paginator.pageIndex+1,this.paginator.pageSize,this.searchCSR.nativeElement.value,this.sort.direction)),(0,z.U)(o=>(this.resultsLength=o.result.total,o.result.items)),(0,X.K)(()=>(0,$.of)([]))).subscribe(o=>{this.filteredAndPagedLists=o,console.log("Fetched Contact Selection Rules:",this.filteredAndPagedLists)})}reload(){this._csrService.getAll(this.paginator.pageIndex+1,this.paginator.pageSize,this.searchCSR.nativeElement.value,this.sort.direction).subscribe(n=>{this.filteredAndPagedLists=n.result.items,console.log(n)})}deleteCSR(n){this.confirmDialogRef=this._matDialog.open(V.J,{disableClose:!1}),this.confirmDialogRef.componentInstance.confirmMessage=`Are you sure you want to delete ${n.name} csr?`,this.confirmDialogRef.afterClosed().subscribe(o=>{o&&this._csrService.deleteCSR(n.id).subscribe(m=>{m&&(this._snackbarService.success(`CSR  ${n.name} deleted successfully.`),this.filteredAndPagedLists.splice(this.filteredAndPagedLists.findIndex(l=>l.id==n.id),1),this.matCSRTable.renderRows())}),this.confirmDialogRef=null})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(I.d),e.Y36(K.uw),e.Y36(E.k))},a.\u0275cmp=e.Xpm({type:a,selectors:[["uc-csr-home"]],viewQuery:function(n,o){if(1&n&&(e.Gf(g.NW,7),e.Gf(u.YE,7),e.Gf(c.BZ,5),e.Gf(W,7)),2&n){let m;e.iGM(m=e.CRH())&&(o.paginator=m.first),e.iGM(m=e.CRH())&&(o.sort=m.first),e.iGM(m=e.CRH())&&(o.matCSRTable=m.first),e.iGM(m=e.CRH())&&(o.searchCSR=m.first)}},decls:44,vars:20,consts:[["id","csrs",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","column","fxLayoutAlign","center center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","s-32","mr-16"],[1,"logo-text","h1"],[1,"search-wrapper","mx-32","mx-md-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["placeholder","Search for a CSR"],["searchCSR",""],["mat-raised-button","",1,"cuc-white","mt-md-0",3,"routerLink"],[1,"content-card"],["matSort","","cucPerfectScrollbar","",1,"csrs-table",3,"dataSource"],["matCSRTable",""],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","templateName"],["matColumnDef","createdOn"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","csr-row",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-icon-button","","fxLayout","column","fxLayoutAlign","center none",3,"click"],[3,"length","pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""],[1,"text-truncate"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],[1,"secondary-text"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","edit",3,"routerLink"],["mat-menu-item","","aria-label","remove",3,"click"],[1,"csr-row"],[1,"no-data-message"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon",5),e._uU(6," list_alt "),e.qZA(),e.TgZ(7,"span",6),e._uU(8," CSR Management "),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"mat-icon"),e._uU(12,"search"),e.qZA(),e._UZ(13,"input",9,10),e.qZA()(),e.TgZ(15,"button",11)(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.TgZ(18,"span"),e._uU(19,"Add New CSR"),e.qZA()()(),e.TgZ(20,"div",12)(21,"mat-table",13,14),e.ynx(23,15),e.YNc(24,R,2,0,"mat-header-cell",16),e.YNc(25,ee,3,1,"mat-cell",17),e.BQk(),e.ynx(26,18),e.YNc(27,te,2,0,"mat-header-cell",16),e.YNc(28,ne,3,1,"mat-cell",17),e.BQk(),e.ynx(29,19),e.YNc(30,ae,2,0,"mat-header-cell",16),e.YNc(31,oe,4,4,"mat-cell",17),e.BQk(),e.ynx(32,20),e.YNc(33,ie,2,0,"mat-header-cell",21),e.YNc(34,re,16,2,"mat-cell",17),e.BQk(),e.YNc(35,me,1,0,"mat-header-row",22),e.YNc(36,ce,1,0,"mat-row",23),e.qZA(),e.YNc(37,se,3,0,"div",24),e.TgZ(38,"div",25)(39,"button",26),e.NdJ("click",function(){return o.reload()}),e.TgZ(40,"mat-icon"),e._uU(41,"refresh"),e.qZA()(),e._UZ(42,"mat-paginator",27,28),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("@animate",e.VKq(13,M,e.DdM(12,le))),e.xp6(2),e.Q6J("@animate",e.VKq(16,M,e.DdM(15,de))),e.xp6(8),e.Q6J("routerLink","/app/csr-management/csr/new"),e.xp6(6),e.Q6J("dataSource",o.filteredAndPagedLists)("@animateStagger",e.DdM(18,pe)),e.xp6(14),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",0==o.filteredAndPagedLists.length),e.xp6(5),e.Q6J("length",o.resultsLength)("pageSize",10)("pageSizeOptions",e.DdM(19,ue)))},directives:[Q.V,C.xw,C.Wh,h.Hw,C.yH,w.lW,d.rH,c.BZ,u.YE,Y.i,c.w1,c.fO,c.ge,u.nU,c.Dz,c.ev,y.p6,y.VK,y.OP,c.as,c.XQ,c.nj,c.Gk,F.O5,g.NW],pipes:[F.uU],styles:["@media screen and (max-width: 959px){uc-csr-home #csrs .top-bg{height:256px}}uc-csr-home #csrs>.center>.header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px rgba(0,0,0,.14),0 1px 3px rgba(0,0,0,.12)}@media screen and (max-width: 599px){uc-csr-home #csrs>.center>.header .search-wrapper{width:100%}}uc-csr-home #csrs>.center>.header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}uc-csr-home #csrs>.center>.header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media screen and (max-width: 959px){uc-csr-home #csrs>.center>.header{padding:8px 0;height:192px!important;min-height:192px!important;max-height:192px!important}}uc-csr-home .csrs-table{flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}uc-csr-home .csrs-table .mat-header-row{min-height:64px}uc-csr-home .csrs-table .csr-row{position:relative;cursor:pointer;height:60px}uc-csr-home .csrs-table .mat-cell{min-width:0;display:flex;align-items:center}uc-csr-home .csrs-table .active-icon{border-radius:50%}uc-csr-home .no-data-message{padding-top:25px;height:100%;text-align:center}\n"],encapsulation:2,data:{animation:L.J}}),a})();var s=r(24006),U=r(88812),k=r(68117),fe=r(25849),he=r(40368);function ge(a,i){if(1&a&&(e.TgZ(0,"div",41),e._uU(1),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.hij(" ",n.csr.name,"")}}function ve(a,i){1&a&&(e.TgZ(0,"div",41),e._uU(1,"New CSR"),e.qZA())}function _e(a,i){if(1&a){const n=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){return e.CHM(n),e.oxw().addCSR()}),e.TgZ(1,"span"),e._uU(2,"Add"),e.qZA()()}if(2&a){const n=e.oxw();e.Q6J("disabled",n.CSRForm.invalid)}}function Se(a,i){if(1&a){const n=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){return e.CHM(n),e.oxw().saveCSR()}),e.TgZ(1,"span"),e._uU(2,"Save"),e.qZA()()}if(2&a){const n=e.oxw();e.Q6J("disabled",n.CSRForm.invalid||n.CSRForm.pristine)}}function xe(a,i){if(1&a&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function Te(a,i){if(1&a&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.text)}}function Ae(a,i){if(1&a&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij("",n.key," ")}}function Ne(a,i){if(1&a&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij("",n.text," ")}}function Ze(a,i){if(1&a){const n=e.EpF();e.TgZ(0,"div",44)(1,"div",25)(2,"mat-form-field",45)(3,"mat-label"),e._uU(4,"Field"),e.qZA(),e.TgZ(5,"mat-select",46),e.YNc(6,Ae,2,2,"mat-option",20),e.qZA()(),e.TgZ(7,"mat-form-field",45)(8,"mat-label"),e._uU(9,"Condition"),e.qZA(),e.TgZ(10,"mat-select",47),e.YNc(11,Ne,2,2,"mat-option",20),e.ALo(12,"enumToArrayPipe"),e.qZA()(),e.TgZ(13,"mat-form-field",45)(14,"mat-label"),e._uU(15,"Value"),e.qZA(),e._UZ(16,"input",48),e.qZA(),e.TgZ(17,"a",49),e.NdJ("click",function(){const l=e.CHM(n).index;return e.oxw().removeCSRConditions(l)}),e._uU(18,"Remove"),e.qZA()()()}if(2&a){const n=i.index,o=e.oxw();e.s9C("formGroupName",n),e.xp6(6),e.Q6J("ngForOf",o.templateHeaders),e.xp6(5),e.Q6J("ngForOf",e.lcZ(12,3,o.operatorType))}}function Ce(a,i){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"PhoneNumber "),e.qZA())}function be(a,i){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.xp6(1),e.Oqu(n.phoneNumber)}}function we(a,i){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," FirstName "),e.qZA())}function ye(a,i){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.xp6(1),e.Oqu(n.firstName)}}function Fe(a,i){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1," LastName "),e.qZA())}function De(a,i){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const n=i.$implicit;e.xp6(1),e.Oqu(n.lastName)}}function Ie(a,i){1&a&&e._UZ(0,"mat-header-row")}function Ue(a,i){1&a&&e._UZ(0,"mat-row")}const Je=function(){return{delay:"100ms",x:"-25px"}},Le=function(a){return{value:"*",params:a}};let q=(()=>{class a{constructor(n,o,m,l,J,Me){this._formBuilder=n,this._snackbarService=o,this._csrService=m,this._csrTemplateService=l,this._route=J,this._router=Me,this.templates=[],this.operatorTypes=k.Fn,this.operatorType=k.SQ,this.filterLimitReached=!1,this.displayedColumns=["phoneNumber","firstName","lastName"],this.dataSource=new c.by(Ee),this.csr=new U.t,this.routeParams=this._route.params,this._csrTemplateService.getAll(1,200).subscribe(Be=>{this.templates=Be.result.items})}ngOnInit(){this.routeParams=this._route.params,this.CSRForm=this.createCreateForm(),"new"===this.routeParams.value.id?(this.pageType="new",this.csr=new U.t):(this.pageType="edit",this.csr.id=this.routeParams.value.id,this._csrService.getById(this.routeParams.value.id).subscribe(n=>{this.templates.length>0&&this.getTemplateHeaders({value:n.result.csrTemplateId}),this.csr=new U.t(n.result),console.log(this.csr),this.CSRForm=this.createCreateForm()}))}createCreateForm(){return this._formBuilder.group({csrTemplateId:new s.NI(this.csr.csrTemplateId),name:new s.NI(this.csr.name),templateName:new s.NI(this.csr.templateName),templates:new s.NI(this.csr.templates),operatorType:new s.NI(this.csr.operatorType),csrConditions:this.addCSRConditions(this.csr.csrConditions),templateHeaders:new s.NI(this.csr.templateHeaders)})}get csrConditionsFormArray(){return this.CSRForm.get("csrConditions")}getCSRConditionsControls(){return this.CSRForm.get("csrConditions").controls}addCSRConditionsFormGroup(){const n=this._formBuilder.group({attributeIndex:[""],operatorType:[""],conditionValue:[""]});this.csrConditionsFormArray.push(n)}addCSRConditions(n){var o=this._formBuilder.array([]);if(0==n.length){const m=this._formBuilder.group({attributeIndex:new s.NI,operatorType:new s.NI,conditionValue:new s.NI});o.push(m)}else n.forEach(m=>{const l=this._formBuilder.group({id:new s.NI(m.id),attributeIndex:new s.NI(m.attributeIndex+""),operatorType:new s.NI(m.operatorType),conditionValue:new s.NI(m.conditionValue)});o.push(l)});return o}removeCSRConditions(n){var o=this.CSRForm.get("csrConditions");o.length>1&&o.removeAt(n),console.log("Conditions before remove: "+o)}getFilterControls(){return this.CSRForm.get("filters").controls}newFilterFormGroup(){return this._formBuilder.group({operatorType:0,csrConditions:this._formBuilder.array([this.addCSRConditionsFormGroup()])})}newConditionFormGroup(){return this._formBuilder.group({attributeIndex:"",operatorType:"",conditionValue:""})}addNewFilter(){var n=this.CSRForm.get("csrConditions");n.push(this.newFilterFormGroup()),10==n.length&&(this.filterLimitReached=!0),n.length>1&&console.log(n)}saveCSR(){const n=this.CSRForm.getRawValue();n.id=this.csr.id,console.log(n),this._csrService.saveCSR(n).subscribe(()=>{this._snackbarService.success(`CSR ${n.name} saved successfully.`),this._router.navigateByUrl("app/csr-management/csrs")},o=>{console.log(o)})}addCSR(){const n=this.CSRForm.getRawValue();console.log(n),this._csrService.addCSR(n).subscribe(o=>{this.csr.id=o.result,this._snackbarService.success(`CSR ${n.name} added successfully.`),this._router.navigateByUrl("app/csr-management/csrs")},o=>{console.log(o)})}getTemplateHeaders(n){this._csrTemplateService.getTemplateHeader(n.value).subscribe(o=>{this.templateHeaders=o.result})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(s.qu),e.Y36(E.k),e.Y36(I.d),e.Y36(fe.J),e.Y36(d.gz),e.Y36(d.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["csr"]],decls:72,vars:18,consts:[["id","product",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","",1,"mr-0","mr-sm-16",3,"routerLink"],["fxLayout","column","fxLayoutAlign","start start"],["class","h2",4,"ngIf"],[1,"subtitle","secondary-text"],["mat-raised-button","","class","save-product-button",3,"disabled","click",4,"ngIf"],[1,"content-card"],[1,"content"],["name","CSRForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["label","Basic Info"],["cucPerfectScrollbar","",1,"tab-content","p-24"],["fxLayout","row","fxLayoutAlign","space-between"],["appearance","outline","floatLabel","always","fxFlex","60"],["matInput","","placeholder","CSR Name","formControlName","name"],["appearance","outline","fxFlex","60"],["formControlName","csrTemplateId","requied","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","50%","fxFlex.xs","100%","fxFlex.sm","100%"],[1,"mat-elevation-z4"],["aria-hidden","false"],["fxLayout","column","fxLayouAlign","space-between start"],["fxLayout","row","fxLayoutAlign","space-between start"],["appearance","outline","floatLabel","always","fxFlex","20"],["name","operatorType","formControlName","operatorType"],["mat-raised-button","",3,"click"],["formArrayName","csrConditions","fxLayout","column","fxLayoutAlign","space-between start"],[3,"formGroupName",4,"ngFor","ngForOf"],["label","Filter Preview"],[3,"dataSource"],["table",""],["matColumnDef","phoneNumber"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"h2"],["mat-raised-button","",1,"save-product-button",3,"disabled","click"],[3,"value"],[3,"formGroupName"],["floatLabel","always","fxFlex","30"],["name","attributeIndex","formControlName","attributeIndex","aria-placeholder","select"],["name","conditionalOperatorType","formControlName","operatorType","aria-placeholder","select"],["matInput","","placeholder","Value","name","conditionValue","formControlName","conditionValue"],["fxFlex","",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5)(6,"mat-icon"),e._uU(7,"arrow_back"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,ge,2,1,"div",7),e.YNc(10,ve,2,0,"div",7),e.TgZ(11,"div",8)(12,"span"),e._uU(13," CSR Settings"),e.qZA()()()(),e.YNc(14,_e,3,1,"button",9),e.YNc(15,Se,3,1,"button",9),e.qZA(),e.TgZ(16,"div",10)(17,"div",11)(18,"form",12)(19,"mat-tab-group")(20,"mat-tab",13)(21,"div",14)(22,"div",15)(23,"mat-form-field",16)(24,"mat-label"),e._uU(25,"Name"),e.qZA(),e._UZ(26,"input",17),e.qZA()(),e.TgZ(27,"div",15)(28,"mat-form-field",18)(29,"mat-label"),e._uU(30,"Select Template"),e.qZA(),e.TgZ(31,"mat-select",19),e.NdJ("selectionChange",function(l){return o.getTemplateHeaders(l)}),e.YNc(32,xe,2,2,"mat-option",20),e.qZA()()()(),e.TgZ(33,"div",14)(34,"div",21)(35,"mat-card",22)(36,"mat-card-header")(37,"mat-card-title")(38,"mat-icon",23),e._uU(39,"filter"),e.qZA(),e._uU(40," Filter "),e.qZA()(),e.TgZ(41,"mat-card-content",24)(42,"div",25)(43,"mat-form-field",26)(44,"mat-label"),e._uU(45,"Operator"),e.qZA(),e.TgZ(46,"mat-select",27),e.YNc(47,Te,2,2,"mat-option",20),e.ALo(48,"enumToArrayPipe"),e.qZA()(),e.TgZ(49,"button",28),e.NdJ("click",function(){return o.addCSRConditionsFormGroup()}),e.TgZ(50,"span"),e._uU(51,"Add Condition"),e.qZA()(),e.TgZ(52,"button",28),e.NdJ("click",function(){return o.addNewFilter()}),e.TgZ(53,"span"),e._uU(54,"Add Filter"),e.qZA()()(),e.TgZ(55,"div",29),e.YNc(56,Ze,19,5,"div",30),e.qZA()()()()()(),e.TgZ(57,"mat-tab",31)(58,"div",14)(59,"mat-table",32,33),e.ynx(61,34),e.YNc(62,Ce,2,0,"mat-header-cell",35),e.YNc(63,be,2,1,"mat-cell",36),e.BQk(),e.ynx(64,37),e.YNc(65,we,2,0,"mat-header-cell",35),e.YNc(66,ye,2,1,"mat-cell",36),e.BQk(),e.ynx(67,38),e.YNc(68,Fe,2,0,"mat-header-cell",35),e.YNc(69,De,2,1,"mat-cell",36),e.BQk(),e.YNc(70,Ie,1,0,"mat-header-row",39),e.YNc(71,Ue,1,0,"mat-row",40),e.qZA()()()()()()()()()),2&n&&(e.xp6(5),e.Q6J("routerLink","/app/csr-management/csrs"),e.xp6(3),e.Q6J("@animate",e.VKq(16,Le,e.DdM(15,Je))),e.xp6(1),e.Q6J("ngIf","edit"===o.pageType),e.xp6(1),e.Q6J("ngIf","new"===o.pageType),e.xp6(4),e.Q6J("ngIf","new"===o.pageType),e.xp6(1),e.Q6J("ngIf","edit"===o.pageType),e.xp6(3),e.Q6J("formGroup",o.CSRForm),e.xp6(14),e.Q6J("ngForOf",o.templates),e.xp6(15),e.Q6J("ngForOf",e.lcZ(48,13,o.operatorTypes)),e.xp6(9),e.Q6J("ngForOf",o.getCSRConditionsControls()),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(11),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns))},directives:[Q.V,C.xw,C.Wh,w.lW,d.rH,h.Hw,F.O5,s._Y,s.JL,C.yH,s.sg,D.SP,D.uX,Y.i,f.KE,f.hX,_.Nt,s.Fj,s.JJ,s.u,S.gD,F.sg,v.ey,p.a8,p.dk,p.n5,p.dn,s.CE,s.x0,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,c.as,c.XQ,c.nj,c.Gk],pipes:[he.T],styles:[""],encapsulation:2,data:{animation:L.J}}),a})();const Ee=[{phoneNumber:"9621789501",firstName:"Pooja",lastName:"Singh"}],Qe=[{path:"",component:B},{path:"csrs",component:B},{path:"csr/:id",component:q},{path:"csr/:id/:handle",component:q}];let Ye=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[I.d],imports:[[d.Bz.forChild(Qe),w.ot,N.Hi,Z.To,f.lN,h.Ps,_.c,g.TU,v.si,S.LD,u.JX,p.QW,t.ZX,c.p0,D.Nh,T.p9,y.Tx,A.A,x.lJ,x.QH]]}),a})()}}]);